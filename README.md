launchctl limit maxfiles 400000 unlimited
sudo launchctl limit maxfiles 400000 unlimited
ulimit -Sn 4096  

https://unix.stackexchange.com/questions/108174/how-to-persistently-control-maximum-system-resource-consumption-on-mac